<svg width="900" height="520" viewBox="0 0 900 520" xmlns="http://www.w3.org/2000/svg" font-family="'SF Mono', 'Fira Code', monospace">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0d1117"/>
      <stop offset="100%" style="stop-color:#161b22"/>
    </linearGradient>
    <linearGradient id="gwGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1f6feb"/>
      <stop offset="100%" style="stop-color:#0d419d"/>
    </linearGradient>
    <linearGradient id="backendGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#238636"/>
      <stop offset="100%" style="stop-color:#196127"/>
    </linearGradient>
    <linearGradient id="adminGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9e6a03"/>
      <stop offset="100%" style="stop-color:#6e4701"/>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#58a6ff"/>
    </marker>
    <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#3fb950"/>
    </marker>
    <marker id="arrowYellow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#d29922"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="520" fill="url(#bg)" rx="12"/>
  <rect width="900" height="520" fill="none" stroke="#30363d" stroke-width="1" rx="12"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" fill="#f0f6fc" font-size="18" font-weight="bold" letter-spacing="2">gateway-pro</text>
  <text x="450" y="58" text-anchor="middle" fill="#8b949e" font-size="11">request flow architecture</text>
  <line x1="60" y1="70" x2="840" y2="70" stroke="#30363d" stroke-width="1"/>

  <!-- CLIENT -->
  <rect x="30" y="200" width="100" height="60" rx="8" fill="#21262d" stroke="#30363d" stroke-width="1.5"/>
  <text x="80" y="226" text-anchor="middle" fill="#8b949e" font-size="10" font-weight="bold">CLIENT</text>
  <text x="80" y="242" text-anchor="middle" fill="#58a6ff" font-size="11">curl / app</text>
  <text x="80" y="256" text-anchor="middle" fill="#8b949e" font-size="10">:any</text>

  <!-- Arrow client -> gateway -->
  <line x1="130" y1="230" x2="190" y2="230" stroke="#58a6ff" stroke-width="1.5" marker-end="url(#arrow)"/>
  <text x="160" y="222" text-anchor="middle" fill="#58a6ff" font-size="9">HTTP</text>

  <!-- GATEWAY BOX -->
  <rect x="190" y="90" width="360" height="340" rx="10" fill="#0d1117" stroke="#1f6feb" stroke-width="1.5"/>
  <rect x="190" y="90" width="360" height="32" rx="10" fill="url(#gwGrad)"/>
  <rect x="190" y="110" width="360" height="12" fill="url(#gwGrad)"/>
  <text x="370" y="112" text-anchor="middle" fill="#ffffff" font-size="12" font-weight="bold" letter-spacing="1">GATEWAY-PRO  :8080</text>

  <!-- Middleware stack inside gateway -->
  <!-- Recovery -->
  <rect x="210" y="135" width="320" height="28" rx="5" fill="#161b22" stroke="#30363d" stroke-width="1"/>
  <text x="280" y="154" fill="#f0f6fc" font-size="11">ğŸ›¡  Recovery middleware</text>
  <text x="500" y="154" text-anchor="end" fill="#8b949e" font-size="10">panic â†’ 500</text>

  <!-- RequestID -->
  <rect x="210" y="170" width="320" height="28" rx="5" fill="#161b22" stroke="#30363d" stroke-width="1"/>
  <text x="280" y="189" fill="#f0f6fc" font-size="11">ğŸ”–  Request ID</text>
  <text x="500" y="189" text-anchor="end" fill="#8b949e" font-size="10">UUID inject</text>

  <!-- Logger -->
  <rect x="210" y="205" width="320" height="28" rx="5" fill="#161b22" stroke="#30363d" stroke-width="1"/>
  <text x="280" y="224" fill="#f0f6fc" font-size="11">ğŸ“‹  Logger</text>
  <text x="500" y="224" text-anchor="end" fill="#8b949e" font-size="10">structured JSON</text>

  <!-- Metrics -->
  <rect x="210" y="240" width="320" height="28" rx="5" fill="#161b22" stroke="#30363d" stroke-width="1"/>
  <text x="280" y="259" fill="#f0f6fc" font-size="11">ğŸ“Š  Prometheus metrics</text>
  <text x="500" y="259" text-anchor="end" fill="#8b949e" font-size="10">histogram / counter</text>

  <!-- Rate Limiter -->
  <rect x="210" y="275" width="320" height="28" rx="5" fill="#161b22" stroke="#e3b341" stroke-width="1"/>
  <text x="280" y="294" fill="#f0f6fc" font-size="11">â±  Rate Limiter</text>
  <text x="500" y="294" text-anchor="end" fill="#e3b341" font-size="10">429 if exceeded</text>

  <!-- Load Balancer -->
  <rect x="210" y="310" width="320" height="28" rx="5" fill="#161b22" stroke="#3fb950" stroke-width="1"/>
  <text x="280" y="329" fill="#f0f6fc" font-size="11">âš–ï¸  Load Balancer</text>
  <text x="500" y="329" text-anchor="end" fill="#3fb950" font-size="10">RR / LC / WRR / IP</text>

  <!-- Circuit Breaker -->
  <rect x="210" y="345" width="320" height="28" rx="5" fill="#161b22" stroke="#f85149" stroke-width="1"/>
  <text x="280" y="364" fill="#f0f6fc" font-size="11">ğŸ’”  Circuit Breaker</text>
  <text x="500" y="364" text-anchor="end" fill="#f85149" font-size="10">open / closed / half</text>

  <!-- Reverse Proxy -->
  <rect x="210" y="380" width="320" height="28" rx="5" fill="#21262d" stroke="#58a6ff" stroke-width="1.5"/>
  <text x="280" y="399" fill="#58a6ff" font-size="11" font-weight="bold">ğŸ”€  httputil.ReverseProxy</text>
  <text x="500" y="399" text-anchor="end" fill="#8b949e" font-size="10">forward request</text>

  <!-- Arrow gateway -> backends -->
  <line x1="550" y1="280" x2="615" y2="200" stroke="#3fb950" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
  <line x1="550" y1="300" x2="615" y2="300" stroke="#3fb950" stroke-width="1.5" marker-end="url(#arrowGreen)"/>
  <line x1="550" y1="320" x2="615" y2="400" stroke="#3fb950" stroke-width="1.5" marker-end="url(#arrowGreen)"/>

  <!-- BACKENDS -->
  <!-- Backend 1 -->
  <rect x="615" y="165" width="130" height="60" rx="8" fill="#0d1117" stroke="#238636" stroke-width="1.5"/>
  <text x="680" y="188" text-anchor="middle" fill="#3fb950" font-size="10" font-weight="bold">BACKEND 1</text>
  <text x="680" y="204" text-anchor="middle" fill="#8b949e" font-size="10">:8081</text>
  <text x="680" y="218" text-anchor="middle" fill="#8b949e" font-size="9">â— healthy</text>

  <!-- Backend 2 -->
  <rect x="615" y="270" width="130" height="60" rx="8" fill="#0d1117" stroke="#238636" stroke-width="1.5"/>
  <text x="680" y="293" text-anchor="middle" fill="#3fb950" font-size="10" font-weight="bold">BACKEND 2</text>
  <text x="680" y="309" text-anchor="middle" fill="#8b949e" font-size="10">:8082</text>
  <text x="680" y="323" text-anchor="middle" fill="#8b949e" font-size="9">â— healthy</text>

  <!-- Backend 3 -->
  <rect x="615" y="375" width="130" height="60" rx="8" fill="#0d1117" stroke="#f85149" stroke-width="1.5"/>
  <text x="680" y="398" text-anchor="middle" fill="#f85149" font-size="10" font-weight="bold">BACKEND 3</text>
  <text x="680" y="414" text-anchor="middle" fill="#8b949e" font-size="10">:8083</text>
  <text x="680" y="428" text-anchor="middle" fill="#f85149" font-size="9">âœ• unhealthy</text>

  <!-- Health checker -->
  <rect x="615" y="460" width="130" height="40" rx="6" fill="#0d1117" stroke="#d29922" stroke-width="1"/>
  <text x="680" y="478" text-anchor="middle" fill="#d29922" font-size="10" font-weight="bold">HEALTH CHECK</text>
  <text x="680" y="492" text-anchor="middle" fill="#8b949e" font-size="9">every 10s</text>
  <line x1="680" y1="460" x2="680" y2="435" stroke="#d29922" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="680" y1="460" x2="680" y2="330" stroke="#d29922" stroke-width="1" stroke-dasharray="3,3"/>

  <!-- ADMIN PORT -->
  <rect x="190" y="450" width="360" height="55" rx="8" fill="#0d1117" stroke="#d29922" stroke-width="1.5"/>
  <text x="370" y="468" text-anchor="middle" fill="#d29922" font-size="11" font-weight="bold">ADMIN  :9090</text>
  <text x="230" y="487" fill="#8b949e" font-size="10">/metrics</text>
  <text x="290" y="487" fill="#8b949e" font-size="10">/healthz</text>
  <text x="355" y="487" fill="#8b949e" font-size="10">/readyz</text>
  <text x="415" y="487" fill="#8b949e" font-size="10">/backends</text>
  <text x="370" y="499" text-anchor="middle" fill="#8b949e" font-size="9">Prometheus scrape  Â·  k8s probes  Â·  debug</text>

  <!-- Hot reload indicator -->
  <rect x="760" y="90" width="120" height="60" rx="8" fill="#0d1117" stroke="#d29922" stroke-width="1"/>
  <text x="820" y="112" text-anchor="middle" fill="#d29922" font-size="10" font-weight="bold">HOT RELOAD</text>
  <text x="820" y="128" text-anchor="middle" fill="#8b949e" font-size="9">fsnotify</text>
  <text x="820" y="142" text-anchor="middle" fill="#8b949e" font-size="9">gateway.yaml</text>
  <line x1="760" y1="120" x2="550" y2="200" stroke="#d29922" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arrowYellow)"/>

  <!-- Legend -->
  <rect x="760" y="200" width="120" height="140" rx="8" fill="#0d1117" stroke="#30363d" stroke-width="1"/>
  <text x="820" y="218" text-anchor="middle" fill="#8b949e" font-size="10" font-weight="bold">LEGEND</text>
  <rect x="770" y="228" width="8" height="8" rx="2" fill="#1f6feb"/>
  <text x="784" y="236" fill="#8b949e" font-size="9">proxy layer</text>
  <rect x="770" y="246" width="8" height="8" rx="2" fill="#238636"/>
  <text x="784" y="254" fill="#8b949e" font-size="9">backend</text>
  <rect x="770" y="264" width="8" height="8" rx="2" fill="#e3b341"/>
  <text x="784" y="272" fill="#8b949e" font-size="9">rate limiter</text>
  <rect x="770" y="282" width="8" height="8" rx="2" fill="#f85149"/>
  <text x="784" y="290" fill="#8b949e" font-size="9">circuit breaker</text>
  <rect x="770" y="300" width="8" height="8" rx="2" fill="#d29922"/>
  <text x="784" y="308" fill="#8b949e" font-size="9">admin / reload</text>
  <line x1="770" y1="322" x2="782" y2="322" stroke="#8b949e" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="784" y="326" fill="#8b949e" font-size="9">async / probe</text>
</svg>
